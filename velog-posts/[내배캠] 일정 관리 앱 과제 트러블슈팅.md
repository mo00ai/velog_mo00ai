<h2 id="1-dto-ë¶„ë¦¬">1. Dto ë¶„ë¦¬</h2>
<p><img alt="" src="https://velog.velcdn.com/images/mo00ai/post/fde5136d-438d-4bb9-aff6-accd267f9467/image.png" /></p>
<p>ì´ì²˜ëŸ¼ ê¸°ëŠ¥ë§ˆë‹¤ ìš”ì²­í•˜ëŠ” ë°ì´í„° í˜•ì‹ì´ ë‹¤ë¥¸ ê²½ìš°ì— Dtoë¥¼ ì–´ë–»ê²Œ í•˜ëŠ”ê²Œ ì¢‹ì„ê¹Œ ê³ ë¯¼í–ˆë‹¤</p>
<blockquote>
<p>ë°ì´í„° í˜•ì‹ë§ˆë‹¤ Dtoë¥¼ ë¶„ë¦¬í•œë‹¤ -&gt; í˜„ì—…ì—ì„œ ê°€ì¥ ë§ì´ ì“°ëŠ” ë°©ë²•</p>
</blockquote>
<p><img alt="" src="https://velog.velcdn.com/images/mo00ai/post/921c732b-4ae4-48a5-a0e6-487d5f12239a/image.png" /></p>
<hr />
<h2 id="2-ë‚ ì§œê°€-ìê¾¸-nullì´-ë‚˜ì˜¤ëŠ”-ë¬¸ì œ">2. ë‚ ì§œê°€ ìê¾¸ nullì´ ë‚˜ì˜¤ëŠ” ë¬¸ì œ!</h2>
<pre><code class="language-java">    @PostMapping
    public ResponseEntity&lt;ScheduleResponseDto&gt; addTodo(@RequestBody ScheduleRequestDto dto) {

        return new ResponseEntity&lt;&gt;(schedulerService.addTodo(dto), HttpStatus.CREATED);
    }</code></pre>
<p>ì¼ì • ìƒì„±í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬</p>
<pre><code class="language-java">@Getter
public class ScheduleRequestDto {

    @Setter
    private String todo;
    @Setter
    private String writer;
    private int password;

}
</code></pre>
<p>ì¼ì •ìƒì„± RequestDto</p>
<blockquote>
<p>ë‚ ì§œëŠ” db ì—°ê²°í•˜ê³  insertí•  ë•Œ ìë™ìœ¼ë¡œ ë“¤ì–´ê°€ë„ë¡ í•  ê±°ì„! ì™œëƒ?</p>
</blockquote>
<br />

<pre><code class="language-mysql">create table schedule (
  id int not null auto_increment primary key,
  todo varchar(100) null,
  writer varchar(20) not null,
  password int not null,
  created_at timestamp default current_timestamp,
  updated_at timestamp default current_timestamp on update current_timestamp
);</code></pre>
<blockquote>
<p>default ê°’(ë°ì´í„°ê°€ nullì¼ ë•Œ ìë™ ì£¼ì…ë˜ëŠ” ê°’)
defaultë¥¼ í˜„ì¬ ë‚ ì§œì‹œê°„ìœ¼ë¡œ ì„¤ì •í•´ë†”ì„œ created_atì„ requestdtoë¡œ ì•ˆë°›ì•„ë„ ë¨!</p>
</blockquote>
<p>âŒ ë¬¸ì œ ë°œìƒ!!!</p>
<p>ì´ë¯¸ null ë°›ì„ ìˆ˜ ìˆë„ë¡ db defaultì„¤ì •í•´ë†¨ëŠ”ë° ìê¾¸
created_at ë‚ ì§œë“¤ì´ nullê°’ì´ì–´ì„œ ì…ë ¥ì´ ì•ˆëœë‹¤ê³  í•¨!!</p>
<blockquote>
<p>jdbcTemplateë¬¸ì œì˜€ì‚¼</p>
</blockquote>
<p>SimpleJdbcInsert jdbcInsert = new SimpleJdbcInsert(jdbcTemplate);        jdbcInsert.withTableName(&quot;schedule&quot;).usingGeneratedKeyColumns(&quot;id&quot;);</p>
<blockquote>
<p>insertí•˜ê¸°ìœ„í•´ ì“°ëŠ” ë©”ì„œë“œì¸ë° ì´ê²Œ ì™œ ì—ëŸ¬ê°€ ë‚¬ëƒ??
ìœ„ì— ì²¨ë¶€í•œ í…Œì´ë¸” ddlë¡œ ë°ì´í„°ë¥¼ ì…ë ¥í•œë‹¤ê³  ì¹˜ì
create_atê³¼ updated_at í¬í•¨ ì…ë ¥ê³¼ ì•„ë‹Œ ì…ë ¥ì„ ë‚˜ëˆ„ì–´ì„œ ì ì–´ë³¼ê±°ì„</p>
</blockquote>
<pre><code class="language-sql">insert into schedule (todo, writer, password)
values ('ìŠ¤í„°ë”” ì¤€ë¹„í•˜ê¸°', 'í™ê¸¸ë™', 1234);

insert into schedule (todo, writer, password,created_at,updated_at)
values ('ìŠ¤í„°ë”” ì¤€ë¹„í•˜ê¸°', 'í™ê¸¸ë™', 1234,'2025-4-45','2025-2-24');</code></pre>
<p>ì´ëŸ° ì‹ìœ¼ë¡œ~ ë­ê°€ ë‹¤ë¥¸ì§€ ì•Œê² ì¬¬?</p>
<blockquote>
<p>nullì´ë‚˜ default ìˆëŠ” ì»¬ëŸ¼ë“¤ ë¹¼ê³  ì…ë ¥í•˜ê³  ì‹¶ìœ¼ë©´ ì»¬ëŸ¼ 3ê°œë§Œ ì¨ë„ ë˜ê³ , ë‹¤ ì…ë ¥í•˜ê³  ì‹¶ìœ¼ë©´ ì»¬ëŸ¼ 5ê°œ ì•Œì•„ì„œ ì¡°ì ˆí•´ì„œ ì…ë ¥í•˜ë©´ ë˜ëŠ” ê±°ì„</p>
</blockquote>
<p>ğŸ¤” ê·¸ëŸ¼ ì™œ ì—ëŸ¬ê°€ ë‚¬ëƒ?</p>
<pre><code class="language-java">        Map&lt;String,Object&gt; parameters = new HashMap&lt;&gt;();
        parameters.put(&quot;todo&quot;,schedule.getTodo());
        parameters.put(&quot;writer&quot;,schedule.getWriter());
        parameters.put(&quot;password&quot;,schedule.getPassword());</code></pre>
<blockquote>
<p>parameters 3ê°œ ì…ë ¥ ì¤‘, ì‹¤ì œ dbì»¬ëŸ¼ì€ 5ê°œì¸ë°! -&gt; ì—ëŸ¬ ë°œìƒ
ì˜ˆë¥¼ ë“¤ë©´ insertë¬¸ì„ ì´ë ‡ê²Œ í•œ ê²ƒê³¼ ë§ˆì°¬ê°€ì§€</p>
</blockquote>
<pre><code class="language-java">insert into schedule (todo, writer, password,created_at,updated_at)
values ('ìŠ¤í„°ë”” ì¤€ë¹„í•˜ê¸°', 'í™ê¸¸ë™');</code></pre>
<p>ğŸ¤”ê·¸ëŸ¼ ì–´ì¼€ í•´ê²°í•˜ë‚˜?</p>
<p>â€¼ï¸ë©”ì„œë“œê°€ ìˆìŒ!</p>
<pre><code class="language-java">        SimpleJdbcInsert jdbcInsert = new SimpleJdbcInsert(jdbcTemplate);
        jdbcInsert.withTableName(&quot;schedule&quot;).usingGeneratedKeyColumns(&quot;id&quot;).usingColumns(&quot;todo&quot;,&quot;writer&quot;,&quot;password&quot;);</code></pre>
<p><code>.usingColumns(&quot;todo&quot;,&quot;writer&quot;,&quot;password&quot;)</code></p>
<blockquote>
<p>ì´ usingColumnsë¥¼ ì‚¬ìš©í•˜ë©´ ë¨!
insert into scheduler () ì´ ì‚¬ì´ ê´„í˜¸ì— ì…ë ¥í•  ì»¬ëŸ¼ì„ ì§€ì •í•´ ì£¼ë“¯ jdbcInsert í´ë˜ìŠ¤ì—ì„œë„ íŒŒë¼ë¯¸í„° ë§¤ì¹­ì‹œì— ì…ë ¥í•  ì»¬ëŸ¼ë“¤ì„ ì§€ì •í•´ì£¼ëŠ” ê±°ì„!!</p>
</blockquote>
<br />

<hr />
<br />

<h2 id="jdbctemplatequery-vs-quereforobject">jdbcTemplate.query vs .quereForObject</h2>
<p><img alt="" src="https://velog.velcdn.com/images/mo00ai/post/5495d382-7e53-4317-96c5-51f80052229a/image.png" /></p>
<p>âŒ ë¬¸ì œ</p>
<pre><code class="language-java">        Schedule schedule = jdbcTemplate.query(&quot;select * from schedule where id = ?&quot;, scheduleMapper(), key);</code></pre>
<blockquote>
<p><code>jdbcTeamplate.query</code>ëŠ” í•­ìƒ Listë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ë‹¨ê±´ ê°ì²´ì¸ Schedule scheduleì—ëŠ” í• ë‹¹ì´ ì•ˆë¨</p>
</blockquote>
<p>â€¼ï¸ í•´ê²°</p>
<p><code>jdbdTemplate.queryForObject</code></p>
<ul>
<li>1 ê±´ ë°˜í™˜, ì˜ˆì™¸ ì²˜ë¦¬ í•„ìˆ˜</li>
</ul>
<pre><code class="language-java">Schedule returnSchedule = jdbcTemplate.queryForObject(&quot;select * from schedule where id = ?&quot;, scheduleMapper(),key);</code></pre>
<blockquote>
<p>ì´ë ‡ê²Œ ìˆ˜ì •í•˜ë©´ ë  ê²ƒ ê°™ì¥ë§Œ?!?</p>
</blockquote>
<hr />
<h3 id="âŒ-jdbctemplatequeryforobjectëŠ”-ì‹¤ë¬´ì—ì„œ-ì˜-ì•ˆì”€">âŒ jdbcTemplate.queryForObjectëŠ” ì‹¤ë¬´ì—ì„œ ì˜ ì•ˆì”€</h3>
<ol>
<li><p>ì˜ˆì™¸ê°€ ë„ˆë¬´ ìì£¼ í„°ì§</p>
<ul>
<li>queryForObject()ëŠ” ê²°ê³¼ê°€ ì—†ìœ¼ë©´ EmptyResultDataAccessException</li>
<li>ê²°ê³¼ê°€ 2ê°œ ì´ìƒì´ë©´ IncorrectResultSizeDataAccessException â†’ ì˜ˆìƒì¹˜ ëª»í•œ ìƒí™©ì—ì„œ ì„œë¹„ìŠ¤ê°€ ì£½ì„ ìˆ˜ ìˆìŒ</li>
</ul>
</li>
<li><p>ìœ ì—°í•˜ì§€ ëª»í•¨</p>
<ul>
<li>ë°ì´í„°ê°€ ìˆì„ ìˆ˜ë„ ìˆê³  ì—†ì„ ìˆ˜ë„ ìˆì„ ë•Œ, queryForObject()ëŠ” ë¬´ì¡°ê±´ try-catchë¡œ ê°ì‹¸ì•¼ ë¼</li>
<li>ë°˜ë©´ query()ëŠ” Listë‹ˆê¹Œ isEmpty()ë§Œ ê²€ì‚¬í•˜ë©´ ë</li>
</ul>
</li>
<li><p>ê²°ê³¼ 1ê±´ì´ë¼ëŠ” ë³´ì¥ì´ ì–´ë µë‹¤</p>
<ul>
<li>ì¿¼ë¦¬ì—ëŠ” where ì ˆì´ ìˆì–´ë„, DBì— ë¬¸ì œê°€ ìˆì–´ì„œ ì¤‘ë³µ ë°ì´í„°ê°€ ìˆì„ ìˆ˜ë„ ìˆìŒ</li>
<li>ì´ëŸ´ ë•Œ queryForObject()ëŠ” ê·¸ëƒ¥ í„°ì§€ê³ , query()ëŠ” ìœ ì—°í•˜ê²Œ ëŒ€ì²˜ ê°€ëŠ¥</li>
</ul>
</li>
</ol>
<blockquote>
<p>ê²°ë¡  : ê²°êµ­ì€ <strong>jdbdTemplate.query ì¨ì•¼í•¨~</strong></p>
</blockquote>
<hr />
<h3 id="âœ…-ê·¸ë˜ì„œ-ì‹¤ë¬´ì—ì„œ-ìì£¼-ì“°ëŠ”-íŒ¨í„´">âœ… ê·¸ë˜ì„œ ì‹¤ë¬´ì—ì„œ ìì£¼ ì“°ëŠ” íŒ¨í„´</h3>
<pre><code class="language-java">List&lt;Schedule&gt; result = jdbcTemplate.query(&quot;select * from schedule where id = ?&quot;, scheduleMapper(), id);
if (result.isEmpty()) {
    return null; // ë˜ëŠ” Optional.empty(), í˜¹ì€ ì˜ˆì™¸ ë˜ì§€ê¸°
}
return result.get(0);</code></pre>
<hr />
<h3 id="ë‚´ê°€-í•œ-ë°©ë²•ê³¼-ë¹„êµ">ë‚´ê°€ í•œ ë°©ë²•ê³¼ ë¹„êµ</h3>
<pre><code class="language-java">        List&lt;Schedule&gt; schedules = jdbcTemplate.query(&quot;select * from schedule where id = ?&quot;, scheduleMapper(), key);


        Schedule returnSchedule = schedules.stream().findAny().orElseThrow(() -&gt; new ResponseStatusException(HttpStatus.NOT_FOUND, &quot;idê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&quot;));

        return new ScheduleResponseDto(key.longValue(), returnSchedule.getTodo(), returnSchedule.getWriter(), returnSchedule.getCreated_at(), returnSchedule.getUpdated_at());</code></pre>
<blockquote>
<p>ê·¸ëƒ¥ ê°ì²´ ìƒˆë¡œ ìƒì„±í•´ì„œ ëŒ€ì…í•˜ê³  ê·¸ ê°ì²´ í•„ë“œë¡œ dtoë¥¼ ìƒˆë¡œ ë§Œë“¤ì—ˆë„¤ìš”~~ í•˜í•˜ ^^;;</p>
</blockquote>
<br />